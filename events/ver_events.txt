
namespace = ver

### Subjects taxation

# ver.20: Remove all taxes. Called by policy change.
country_event = {
	id = ver.20
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		num_pops >= 1	
	}

	immediate = {
		every_subject = {
			ver_remove_overlord_taxes = yes
		}
		ver_remove_taxes_bonuses = yes
	}
}

# ver.21: Apply light taxes. Called by policy change.
country_event = {
	id = ver.21
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		every_subject = {
			limit = { is_gestalt = no }
			ver_remove_overlord_taxes = yes
			add_modifier = { modifier = ver_light_overlord_taxes days = -1 }
		}
		country_event = { id = vermain.20 }
	}
}

# ver.22: Apply moderate taxes. Called by policy change.
country_event = {
	id = ver.22
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		every_subject = {
			limit = { is_gestalt = no }
			ver_remove_overlord_taxes = yes
			add_modifier = { modifier = ver_moderate_overlord_taxes days = -1 }
		}
		country_event = { id = vermain.20 }
	}
}

# ver.23: Apply heavy overlord taxes. Called by policy change.
country_event = {
	id = ver.23
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		every_subject = {
			limit = { is_gestalt = no }
			ver_remove_overlord_taxes = yes
			add_modifier = { modifier = ver_heavy_overlord_taxes days = -1 }
		}
		country_event = { id = vermain.20 }
	}
}

# ver.24: Apply burdensome overlord taxes. Called by policy change.
country_event = {
	id = ver.24
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		every_subject = {
			limit = { is_gestalt = no }
			ver_remove_overlord_taxes = yes
			add_modifier = { modifier = ver_burdensome_overlord_taxes days = -1 }
		}
		country_event = { id = vermain.20 }
	}
}

### Proxy Wars

# # ver.30: Save Puppet States as event targets
# country_event = {
# 	id = ver.30
# 	hide_window = yes
# 	is_triggered_only = yes

# 	immediate = {
# 		save_event_target_as = ver_puppeteer # For use later
# 		set_variable = { which = ver_total_puppet_states value = 0 }

# 		# Count how many valid Puppet States there are
# 		every_subject = {
# 			limit = {
# 				OR = {
# 					any_agreement = { agreement_preset = preset_verpuppet }
# 					any_agreement = { agreement_preset = preset_verkobun }
# 				}
# 				is_at_war = no
# 				any_neighbor_country = {
# 					OR = {
# 						is_country_type_with_subjects = yes
# 						is_country_type = awakened_fallen_empire
# 						is_country_type = ascended_empire
# 					}
# 					NOR = {
# 						is_same_value = event_target:ver_puppeteer
# 						has_defensive_pact = event_target:ver_puppeteer
# 						is_in_federation_with = event_target:ver_puppeteer
# 						has_association_status = event_target:ver_puppeteer
# 						AND = {
# 							is_subject = yes
# 							OR = {
# 								overlord = { is_same_value = event_target:ver_puppeteer }
# 								overlord = { has_defensive_pact = event_target:ver_puppeteer }
# 								overlord = { is_in_federation_with = event_target:ver_puppeteer }
# 								overlord = { has_association_status = event_target:ver_puppeteer }
# 							}
# 						}
# 					}
# 				}
# 			}
# 			set_country_flag = ver_puppet_counted
# 			overlord = { change_variable = { which = ver_total_puppet_states value = 1 } }
# 		}

# 		# Next, we save each puppet as an Event Target
# 		# As the scripting language doesn't have proper loops, we use a lot of ifs and hope no one ever has more than 10 puppets.
# 		if = {
# 			limit = { check_variable = { which = ver_total_puppet_states value >= 1 } }
# 			random_subject = {
# 				limit = { has_country_flag = ver_puppet_counted }
# 				remove_country_flag = ver_puppet_counted
# 				save_event_target_as = puppet_1
# 			}
# 		}
# 		if = {
# 			limit = { check_variable = { which = ver_total_puppet_states value >= 2 } }
# 			random_subject = {
# 				limit = { has_country_flag = ver_puppet_counted }
# 				remove_country_flag = ver_puppet_counted
# 				save_event_target_as = puppet_2
# 			}
# 		}
# 		if = {
# 			limit = { check_variable = { which = ver_total_puppet_states value >= 3 } }
# 			random_subject = {
# 				limit = { has_country_flag = ver_puppet_counted }
# 				remove_country_flag = ver_puppet_counted
# 				save_event_target_as = puppet_3
# 			}
# 		}
# 		if = {
# 			limit = { check_variable = { which = ver_total_puppet_states value >= 4 } }
# 			random_subject = {
# 				limit = { has_country_flag = ver_puppet_counted }
# 				remove_country_flag = ver_puppet_counted
# 				save_event_target_as = puppet_4
# 			}
# 		}
# 		if = {
# 			limit = { check_variable = { which = ver_total_puppet_states value >= 5 } }
# 			random_subject = {
# 				limit = { has_country_flag = ver_puppet_counted }
# 				remove_country_flag = ver_puppet_counted
# 				save_event_target_as = puppet_5
# 			}
# 		}
# 		if = {
# 			limit = { check_variable = { which = ver_total_puppet_states value >= 6 } }
# 			random_subject = {
# 				limit = { has_country_flag = ver_puppet_counted }
# 				remove_country_flag = ver_puppet_counted
# 				save_event_target_as = puppet_6
# 			}
# 		}
# 		if = {
# 			limit = { check_variable = { which = ver_total_puppet_states value >= 7 } }
# 			random_subject = {
# 				limit = { has_country_flag = ver_puppet_counted }
# 				remove_country_flag = ver_puppet_counted
# 				save_event_target_as = puppet_7
# 			}
# 		}
# 		if = {
# 			limit = { check_variable = { which = ver_total_puppet_states value >= 8 } }
# 			random_subject = {
# 				limit = { has_country_flag = ver_puppet_counted }
# 				remove_country_flag = ver_puppet_counted
# 				save_event_target_as = puppet_8
# 			}
# 		}
# 		if = {
# 			limit = { check_variable = { which = ver_total_puppet_states value >= 9 } }
# 			random_subject = {
# 				limit = { has_country_flag = ver_puppet_counted }
# 				remove_country_flag = ver_puppet_counted
# 				save_event_target_as = puppet_9
# 			}
# 		}
# 		if = {
# 			limit = { check_variable = { which = ver_total_puppet_states value >= 10 } }
# 			random_subject = {
# 				limit = { has_country_flag = ver_puppet_counted }
# 				remove_country_flag = ver_puppet_counted
# 				save_event_target_as = puppet_10
# 			}
# 		}

# 		country_event = { id = ver.31 }
# 	}
# }

# # ver.31: List Puppet States
# country_event = {
# 	id = ver.31
# 	title = ver.31.name
# 	desc = {
# 		trigger = { check_variable = { which = ver_total_puppet_states value > 0 } }
# 		text = ver.31.desc
# 	}
# 	desc = {
# 		trigger = { check_variable = { which = ver_total_puppet_states value = 0 } }
# 		text = ver.31.desc.fail
# 	}
# 	picture = GFX_evt_board_meeting
# 	show_sound = event_laboratory_sound
# 	location = ROOT

# 	is_triggered_only = yes

# 	# No valid target
# 	option = {
# 		name = ver.31.fail
# 		trigger = { check_variable = { which = ver_total_puppet_states value = 0 } }
# 		add_resource = { influence = 300 }
# 		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
# 	}

# 	# Now we show a list of the puppet states to the player
# 	option = {
# 		name = ver.31.puppet_1
# 		custom_tooltip = ver.31.puppet_1.tooltip
# 		trigger = { check_variable = { which = ver_total_puppet_states value >= 1 } }
# 		hidden_effect = {
# 			event_target:puppet_1 = {
# 				country_event = { id = ver.32 }
# 			}
# 		}
# 	}
# 	option = {
# 		name = ver.31.puppet_2
# 		custom_tooltip = ver.31.puppet_2.tooltip
# 		trigger = { check_variable = { which = ver_total_puppet_states value >= 2 } }
# 		hidden_effect = {
# 			event_target:puppet_2 = {
# 				country_event = { id = ver.32 }
# 			}
# 		}
# 	}
# 	option = {
# 		name = ver.31.puppet_3
# 		custom_tooltip = ver.31.puppet_3.tooltip
# 		trigger = { check_variable = { which = ver_total_puppet_states value >= 3 } }
# 		hidden_effect = {
# 			event_target:puppet_3 = {
# 				country_event = { id = ver.32 }
# 			}
# 		}
# 	}
# 	option = {
# 		name = ver.31.puppet_4
# 		custom_tooltip = ver.31.puppet_4.tooltip
# 		trigger = { check_variable = { which = ver_total_puppet_states value >= 4 } }
# 		hidden_effect = {
# 			event_target:puppet_4 = {
# 				country_event = { id = ver.32 }
# 			}
# 		}
# 	}
# 	option = {
# 		name = ver.31.puppet_5
# 		custom_tooltip = ver.31.puppet_5.tooltip
# 		trigger = { check_variable = { which = ver_total_puppet_states value >= 5 } }
# 		hidden_effect = {
# 			event_target:puppet_5 = {
# 				country_event = { id = ver.32 }
# 			}
# 		}
# 	}
# 	option = {
# 		name = ver.31.puppet_6
# 		custom_tooltip = ver.31.puppet_6.tooltip
# 		trigger = { check_variable = { which = ver_total_puppet_states value >= 6 } }
# 		hidden_effect = {
# 			event_target:puppet_6 = {
# 				country_event = { id = ver.32 }
# 			}
# 		}
# 	}
# 	option = {
# 		name = ver.31.puppet_7
# 		custom_tooltip = ver.31.puppet_7.tooltip
# 		trigger = { check_variable = { which = ver_total_puppet_states value >= 7 } }
# 		hidden_effect = {
# 			event_target:puppet_7 = {
# 				country_event = { id = ver.32 }
# 			}
# 		}
# 	}
# 	option = {
# 		name = ver.31.puppet_8
# 		custom_tooltip = ver.31.puppet_8.tooltip
# 		trigger = { check_variable = { which = ver_total_puppet_states value >= 8 } }
# 		hidden_effect = {
# 			event_target:puppet_8 = {
# 				country_event = { id = ver.32 }
# 			}
# 		}
# 	}
# 	option = {
# 		name = ver.31.puppet_9
# 		custom_tooltip = ver.31.puppet_9.tooltip
# 		trigger = { check_variable = { which = ver_total_puppet_states value >= 9 } }
# 		hidden_effect = {
# 			event_target:puppet_9 = {
# 				country_event = { id = ver.32 }
# 			}
# 		}
# 	}
# 	option = {
# 		name = ver.31.puppet_10
# 		custom_tooltip = ver.31.puppet_10.tooltip
# 		trigger = { check_variable = { which = ver_total_puppet_states value >= 10 } }
# 		hidden_effect = {
# 			event_target:puppet_10 = {
# 				country_event = { id = ver.32 }
# 			}
# 		}
# 	}

# 	option = {
# 		name = ver.31.back
# 		custom_tooltip = ver.31.back.tooltip
# 		trigger = { check_variable = { which = ver_total_puppet_states value > 0 } }
# 	}
# }

# ver.32: Save valid targets as event targets
country_event = {
	id = ver.32
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		set_variable = { which = ver_puppet_neighbors value = 0 }

		every_neighbor_country = {
			limit = {
				OR = {
					is_country_type_with_subjects = yes
					is_country_type = awakened_fallen_empire
					is_country_type = ascended_empire
				}
				NOR = {
					is_same_value = event_target:ver_puppeteer
					has_defensive_pact = event_target:ver_puppeteer
					is_in_federation_with = event_target:ver_puppeteer
					has_association_status = event_target:ver_puppeteer
					AND = {
						is_subject = yes
						OR = {
							overlord = { is_same_value = event_target:ver_puppeteer }
							overlord = { has_defensive_pact = event_target:ver_puppeteer }
							overlord = { is_in_federation_with = event_target:ver_puppeteer }
							overlord = { has_association_status = event_target:ver_puppeteer }
						}
					}
				}
			}
			PREV = { change_variable = { which = ver_puppet_neighbors value = 1 } }
			set_country_flag = puppet_neighbor_counted
		}

		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 1 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_1
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 2 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_2
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 3 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_3
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 4 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_4
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 5 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_5
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 6 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_6
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 7 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_7
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 8 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_8
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 9 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_9
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 10 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_10
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 11 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_11
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 12 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_12
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 13 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_13
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 14 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_14
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 15 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_15
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 16 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_16
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 17 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_17
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 18 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_18
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 19 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_19
			}
		}
		if = {
			limit = { check_variable = { which = ver_puppet_neighbors value >= 20 } }
			random_neighbor_country = {
				limit = { has_country_flag = puppet_neighbor_counted }
				remove_country_flag = puppet_neighbor_counted
				save_event_target_as = puppet_neighbor_20
			}
		}

		event_target:ver_puppeteer = { country_event = { id = ver.33 } }
	}
}

# ver.33: Now let the player choose who to attack!
country_event = {
	id = ver.33
	title = veru.3000.name
	desc = ver.33.desc
	location = from

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:chosen_subject.ruler
		planet_background = event_target:chosen_subject
		graphical_culture = event_target:chosen_subject
		city_level = event_target:chosen_subject.capital_scope
		room = event_target:chosen_subject.ruler
	}

	is_triggered_only = yes

	# Back
	option = { name = veru.1000.back }

	option = {
		name = ver.33.puppet_neighbor_1
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 1 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_1 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_2
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 2 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_2 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_3
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 3 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_3 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_4
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 4 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_4 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_5
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 5 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_5 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_6
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 6 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_6 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_7
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 7 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_7 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_8
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 8 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_8 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_9
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 9 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_9 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_10
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 10 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_10 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_11
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 11 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_11 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_12
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 12 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_12 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_13
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 13 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_13 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_14
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 14 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_14 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_15
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 15 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_15 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_16
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 16 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_16 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_17
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 17 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_17 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_18
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 18 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_18 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_19
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 19 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_19 attacker_war_goal = wg_humiliation } }
	}
	option = {
		name = ver.33.puppet_neighbor_20
		trigger = { from = { check_variable = { which = ver_puppet_neighbors value >= 20 } } }
		allow = {
			custom_tooltip = {
				fail_text = influencefail_text_veru_200
				has_resource = { type = influence amount >= 200 }
			}
		}
		add_resource = { influence = -200 }
		set_timed_country_flag = { flag = ver_called_proxy_war days = 1800 }
		FROM = { declare_war = { target = event_target:puppet_neighbor_20 attacker_war_goal = wg_humiliation } }
	}
}

### Blood tax

# ver.40: the Blood Tax
country_event = {
	id = ver.40
	title = ver.40.name
	desc = ver.40.desc
	picture = GFX_evt_burning_settlement
	location = ROOT

	is_triggered_only = yes

	trigger = {
		is_overlord = yes
		any_subject = {
			OR = {
				any_agreement = { agreement_preset = preset_verblood }
				any_agreement = { agreement_preset = preset_verdebtor }
			}
			NOT = { is_at_war_with = overlord }
		}
	}

	immediate = {
		set_variable = { which = ver_blood_tributary_total_population value = 0 }
		every_subject = {
			limit = {
				OR = {
					any_agreement = { agreement_preset = preset_verblood }
					any_agreement = { agreement_preset = preset_verdebtor }
				}
				NOT = { is_at_war_with = overlord }
			}
			set_country_flag = ver_blood_tributary
			every_owned_pop = {
				Root = {
					change_variable = { which = ver_blood_tributary_total_population value = 1 }
				}
			}
		}

		if = {
			limit = { is_megacorp = no }
			divide_variable = { which = ver_blood_tributary_total_population value = 10 }
		}
		else_if = {
			limit = { is_megacorp = yes }
			divide_variable = { which = ver_blood_tributary_total_population value = 20 }
		}
	}

	# Distribute them among our worlds
	option = {
		name = ver.40.distribute
		custom_tooltip = ver.40.distribute.tooltip

		hidden_effect = {
			set_variable = { which = ver_blood_tributary_total_population value = 0 }
			every_subject = {
				limit = { has_country_flag = ver_blood_tributary }
				every_owned_pop = {
					Root = {
						change_variable = { which = ver_blood_tributary_total_population value = 1 }
					}
				}
				Root = {
					if = {
						limit = { is_megacorp = no }
						divide_variable = { which = ver_blood_tributary_total_population value = 10 }
					}
					else_if = {
						limit = { is_megacorp = yes }
						divide_variable = { which = ver_blood_tributary_total_population value = 20 }
					}
					while = {
						count = ver_blood_tributary_total_population

						Prev = {
							random_owned_planet = {
								limit = { num_pops > 1 }
								random_owned_pop = {
									species = { save_event_target_as = blood_tribute_species }
									kill_pop = yes
								}
							}
						}

						if = {
							limit = { any_owned_planet = { free_housing > 0 } }
							random_owned_planet = {
								limit = { free_housing > 0 }
								create_pop = { species = event_target:blood_tribute_species }
							}
						}
						else = {
							random_owned_planet = {
								create_pop = { species = event_target:blood_tribute_species }
							}
						}
					}
				}

			}
		}
	}

	# Distribute them among our worlds
	option = {
		name = ver.40.distribute
		custom_tooltip = ver.40.distribute.tooltip
		trigger = { any_owned_planet = { has_modifier = slave_colony } }

		hidden_effect = {
			set_variable = { which = ver_blood_tributary_total_population value = 0 }
			every_subject = {
				limit = { has_country_flag = ver_blood_tributary }
				every_owned_pop = {
					Root = {
						change_variable = { which = ver_blood_tributary_total_population value = 1 }
					}
				}
				Root = {
					if = {
						limit = {
							NOT = {
								is_megacorp = yes
							}
						}
						divide_variable = { which = ver_blood_tributary_total_population value = 10 }
					}
					else_if = {
						limit = {
							is_megacorp = yes
						}
						divide_variable = { which = ver_blood_tributary_total_population value = 20 }
					}

					while = {
						count = ver_blood_tributary_total_population

						Prev = {
							random_owned_planet = {
								limit = {
									num_pops > 1
								}
								random_owned_pop = {
									species = { save_event_target_as = blood_tribute_species }
									kill_pop = yes
								}
							}
						}
						random_owned_planet = {
							limit = { has_modifier = slave_colony }
							create_pop = {
								species = event_target:blood_tribute_species
							}
						}
					}
				}
			}
		}
	}

	after = {
		hidden_effect = {
			set_timed_country_flag = { flag = ver_recent_blood_tribute days = 5400 }
			set_variable = { which = ver_blood_tributary_total_population value = 0 }
			every_subject = {
				limit = { has_country_flag = ver_blood_tributary }
				remove_country_flag = ver_blood_tributary
			}
		}
	}
}
